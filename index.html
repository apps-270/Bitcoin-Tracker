
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Bitcoin Data Analysis (Demo)</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b1020; --card:#0f1724; --muted:#94a3b8; --accent:#f7931a; --glass: rgba(255,255,255,0.04);
      --success:#16a34a; --danger:#ef4444; --glass-2: rgba(255,255,255,0.02);
      font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    body{margin:0; background:linear-gradient(180deg,#071126 0%, #071427 100%); color:#e6eef8; min-height:100vh;transition:background .35s,color .35s}
    body.light{background:linear-gradient(180deg,#f6f7fb 0%, #eef2f7 100%);color:#0b1220}
    .container{max-width:1200px;margin:18px auto;padding:18px}

    /* Header */
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
    .logo{display:flex;align-items:center;gap:12px}
    .logo .brand{font-weight:800;font-size:20px;letter-spacing:0.4px}
    .nav{display:flex;gap:8px;flex-wrap:wrap}
    .nav button{background:transparent;border:1px solid var(--glass);padding:8px 12px;border-radius:10px;color:var(--muted);cursor:pointer;backdrop-filter: blur(4px)}
    .nav button.active{border-color:var(--accent);color:var(--accent)}
    .theme-toggle{display:inline-flex;align-items:center;gap:8px;padding:8px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);cursor:pointer}

    /* Card */
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid var(--glass-2);padding:18px;border-radius:16px;transform:translateY(8px);opacity:0;animation:cardIn .5s forwards}
    @keyframes cardIn{to{transform:none;opacity:1}}

    /* Login */
    #login-screen{display:grid;place-items:center;height:75vh}
    .login-box{width:460px;padding:28px;border-radius:14px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid var(--glass-2)}
    .login-box h2{margin:0 0 10px}
    .form-row{margin:12px 0}
    input{width:100%;padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}
    .btn{background:var(--accent);border:none;padding:10px 14px;border-radius:10px;color:#091427;font-weight:700;cursor:pointer}
    .hint{font-size:13px;color:var(--muted);margin-top:8px}

    /* Main layout */
    .grid{display:grid;grid-template-columns:320px 1fr;gap:18px}
    aside{min-height:60vh}
    .profile{display:flex;gap:12px;align-items:center}
    .avatar{width:72px;height:72px;border-radius:14px;background:linear-gradient(135deg,#263242,#1b2532);display:grid;place-items:center;font-weight:800;overflow:hidden}
    .avatar img{width:100%;height:100%;object-fit:cover;border-radius:12px;display:block;box-shadow:0 6px 18px rgba(0,0,0,0.6);transform:translateY(0);animation:float 6s ease-in-out infinite}
    @keyframes float{0%{transform:translateY(0)}50%{transform:translateY(-6px)}100%{transform:translateY(0)}}
    .balance{margin-top:12px}
    .big-balance{font-size:22px;font-weight:800}
    .small{color:var(--muted);font-size:13px}

    /* Dashboard */
    .chart-wrap{height:340px}
    .kpis{display:flex;gap:12px;margin-top:12px}
    .kpi{flex:1;padding:12px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));border:1px solid var(--glass-2)}

    /* History */
    .timeline{margin-top:12px}
    .event{padding:12px;border-radius:10px;margin-bottom:10px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));border:1px solid var(--glass-2)}
    .event h4{margin:0 0 6px}
    .muted{color:var(--muted)}
    .dropdown{margin-top:8px}
    .dd-item{border:1px solid rgba(255,255,255,0.03);padding:10px;border-radius:10px;margin-bottom:8px;background:transparent}
    .dd-item h5{margin:0;cursor:pointer}
    .dd-body{display:none;margin-top:8px;color:var(--muted);font-size:14px}

    /* Chat */
    .chat-box{height:360px;display:flex;flex-direction:column}
    .messages{flex:1;overflow:auto;padding:12px;display:flex;flex-direction:column;gap:8px}
    .msg{max-width:78%;padding:10px;border-radius:12px}
    .msg.bot{align-self:flex-start;background:rgba(255,255,255,0.03)}
    .msg.user{align-self:flex-end;background:linear-gradient(90deg,#0ea5e9 0%, #38bdf8 100%);color:#041025}
    .quick-list{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
    .quick-list button{background:transparent;border:1px solid var(--glass);padding:8px;border-radius:10px;color:var(--muted);cursor:pointer}

    /* extra pages */
    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .tx{display:flex;justify-content:space-between;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.02);background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));}

    /* pie chart */
    .mini-chart{width:120px;height:120px}

    /* toast */
    .toast{position:fixed;right:20px;bottom:20px;background:#081024;color:#e6eef8;padding:12px 16px;border-radius:10px;box-shadow:0 8px 30px rgba(0,0,0,0.6);border:1px solid rgba(255,255,255,0.04);opacity:0;transform:translateY(12px);transition:all .35s}
    .toast.show{opacity:1;transform:translateY(0)}

    /* small screens */
    @media (max-width:980px){.grid{grid-template-columns:1fr}.container{padding:12px}.login-box{width:94%}}

    /* slide-in account */
    .slide-account{position:fixed;right:-480px;top:0;width:480px;height:100%;background:linear-gradient(180deg,#071226,#071427);box-shadow:-30px 0 80px rgba(0,0,0,0.6);border-left:1px solid rgba(255,255,255,0.03);padding:20px;transition:right .45s cubic-bezier(.2,.9,.2,1);z-index:40}
    .slide-account.open{right:0}
    .close-btn{background:transparent;border:1px solid var(--glass);padding:8px;border-radius:10px;color:var(--muted);cursor:pointer}

    footer{margin-top:20px;color:var(--muted);font-size:13px;text-align:center}
    body.light .card{background:linear-gradient(180deg, #ffffff, #fbfbfb);border-color:rgba(0,0,0,0.06)}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">
        <svg width="36" height="36" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="24" height="24" rx="6" fill="#0f1724"/><path d="M12 4v16" stroke="#f7931a" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M8 8h8" stroke="#f7931a" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
        <div>
          <div class="brand">BitVista (Demo)</div>
          <div class="small muted">Bitcoin data analysis (demo)</div>
        </div>
      </div>
      <nav class="nav">
        <button id="nav-dashboard" class="active">Dashboard</button>
        <button id="nav-portfolio">Portfolio</button>
        <button id="nav-history">History</button>
        <button id="nav-news">News</button>
        <button id="nav-tools">Tools</button>
        <button id="nav-chat">Chat</button>
        <button id="open-account">My Account</button>
        <button id="theme-btn" class="theme-toggle">Toggle Theme</button>
      </nav>
    </header>

    <!-- LOGIN SCREEN -->
    <main id="login-screen">
      <div class="login-box card">
        <h2>Welcome back</h2>
        <p class="muted">Demo login, use the demo credentials to enter.</p>
        <div class="form-row">
          <label class="small muted">Username</label>
          <input id="username" value="" placeholder="Username" />
        </div>
        <div class="form-row">
          <label class="small muted">Password</label>
          <input id="password" type="password" placeholder="Password" />
        </div>
        <div style="display:flex;gap:8px;align-items:center;margin-top:8px">
          <button id="login-btn" class="btn">Login</button>
          <div class="hint">Demo credentials: <strong>Aparna</strong> / <strong>App270</strong></div>
        </div>
      </div>
    </main>

    <!-- APP (hidden until login) -->
    <section id="app" style="display:none">
      <div class="grid">
        <aside>
          <div class="card">
            <div class="profile">
              <div class="avatar"><img id="profile-pic" src="https://i.pinimg.com/1200x/dc/bb/ef/dcbbef335b4667ca863fc04072b3b9c8.jpg" alt="Aparna"/></div>
              <div>
                <div id="acct-name" style="font-weight:700">Aparna</div>
                <div class="small muted">Demo VIP account</div>
              </div>
            </div>

            <div class="balance">
              <div class="small muted">Bitcoin Balance</div>
              <div class="big-balance" id="btc-balance">-- BTC</div>
              <div class="small muted" id="usd-balance">--</div>
            </div>

            <div style="margin-top:12px" class="small muted">Portfolio</div>
            <div class="kpis" style="margin-top:8px">
              <div class="kpi">
                <div class="small muted">24h Change</div>
                <div id="change-24">+3.2%</div>
              </div>
              <div class="kpi">
                <div class="small muted">Market Cap</div>
                <div id="mcap">$1.2T</div>
              </div>
            </div>
          </div>

          <div style="margin-top:12px" class="card">
            <div class="small muted">Quick Links</div>
            <div style="margin-top:10px;display:flex;flex-direction:column;gap:8px">
              <button class="close-btn" id="to-dashboard">Open Dashboard</button>
              <button class="close-btn" id="to-portfolio">Open Portfolio</button>
              <button class="close-btn" id="to-history">Open History</button>
              <button class="close-btn" id="to-news">Open News</button>
              <button class="close-btn" id="to-chat">Open Chat</button>
            </div>
          </div>
        </aside>

        <main>
          <!-- Dashboard -->
          <div id="dashboard-page" class="card">
            <div style="display:flex;align-items:center;justify-content:space-between">
              <div>
                <h3 style="margin:0">Bitcoin Price (Demo)</h3>
                <div class="small muted">Live demo chart, fake data</div>
              </div>
              <div class="small muted">Last updated: <span id="last-updated">--</span></div>
            </div>

            <div class="chart-wrap" style="margin-top:12px">
              <canvas id="btcChart"></canvas>
            </div>

            <div class="kpis" style="margin-top:12px">
              <div class="kpi">
                <div class="small muted">Current Price</div>
                <div id="cur-price">$--</div>
              </div>
              <div class="kpi">
                <div class="small muted">Weekly Trend</div>
                <div id="week-trend">Mixed</div>
              </div>
              <div class="kpi">
                <div class="small muted">Volatility</div>
                <div id="vol">High</div>
              </div>
            </div>

            <div style="margin-top:12px" class="small muted">Tip: This is demo data. Replace with real API responses for production.</div>

            <div style="margin-top:12px" class="grid-2">
              <div class="card">
                <div style="display:flex;justify-content:space-between;align-items:center">
                  <div>
                    <div class="small muted">Recent Activity</div>
                    <div style="font-weight:700">Transactions</div>
                  </div>
                  <div class="small muted">View all</div>
                </div>
                <div style="margin-top:10px">
                  <div class="tx"><div>Buy 2 BTC</div><div class="small muted">- $90,000</div></div>
                  <div class="tx"><div>Sell 0.5 BTC</div><div class="small muted">+ $22,500</div></div>
                  <div class="tx"><div>Reward</div><div class="small muted">+ 0.01 BTC</div></div>
                </div>
              </div>

              <div class="card">
                <div class="small muted">Watchlist</div>
                <div style="margin-top:10px">
                  <div class="tx"><div>BTC</div><div>$<span id="watch-btc">--</span></div></div>
                  <div class="tx"><div>ETH</div><div>$3,400</div></div>
                  <div style="margin-top:12px"><canvas id="pieChart" class="mini-chart"></canvas></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Portfolio page -->
          <div id="portfolio-page" class="card" style="margin-top:18px;display:none">
            <h3>Portfolio (Demo)</h3>
            <div style="margin-top:10px" class="kpis">
              <div class="kpi"><div class="small muted">Total Value</div><div id="total-value">--</div></div>
              <div class="kpi"><div class="small muted">Holdings</div><div id="holdings">BTC, ETH</div></div>
              <div class="kpi"><div class="small muted">Risk Level</div><div id="risk">High</div></div>
            </div>

            <div style="margin-top:12px">
              <h4>Detailed Holdings</h4>
              <div class="tx"><div>Bitcoin ‚Äî 12.345 BTC</div><div>$<span id="holding-btc">--</span></div></div>
              <div class="tx"><div>Ethereum ‚Äî 50 ETH</div><div>$170,000</div></div>
            </div>
          </div>

          <!-- History page -->
          <div id="history-page" class="card" style="margin-top:18px;display:none">
            <h3>Bitcoin ‚Äî Knowledge Hub</h3>
            <div class="muted">Expand the topics below to read more. This is demo content ‚Äî add more entries as needed.</div>

            <div class="dropdown">
              <div class="dd-item">
                <h5 data-topic="whitepaper">2008 Bitcoin Whitepaper ‚ñæ</h5>
                <div class="dd-body" id="whitepaper">Satoshi Nakamoto published the Bitcoin whitepaper titled "Bitcoin: A Peer-to-Peer Electronic Cash System" on October 31, 2008. It introduced the concept of a decentralized ledger called the blockchain, proof-of-work for consensus, and digital signatures for ownership. Key ideas: double-spend prevention, decentralized consensus.</div>
              </div>

              <div class="dd-item">
                <h5 data-topic="genesis">2009 ‚Äî Genesis Block ‚ñæ</h5>
                <div class="dd-body" id="genesis">The genesis block (block 0) was mined on January 3, 2009. It contains the message referencing a newspaper headline and marks the start of the Bitcoin blockchain. Early transactions included mining rewards and simple transfers.</div>
              </div>

              <div class="dd-item">
                <h5 data-topic="economics">Bitcoin Economics ‚ñæ</h5>
                <div class="dd-body" id="economics">Bitcoin has a capped supply of 21 million coins, with new coins issued via block rewards that halve roughly every four years. Scarcity, adoption, and macroeconomic factors drive price. Learn about halving, issuance schedule, and on-chain metrics like realized cap.</div>
              </div>

              <div class="dd-item">
                <h5 data-topic="security">Security & Best Practices ‚ñæ</h5>
                <div class="dd-body" id="security">Security best practices include using hardware wallets for long-term storage, enabling two-factor authentication on exchanges, verifying addresses carefully, and backing up seed phrases offline. Never share private keys.</div>
              </div>

              <div class="dd-item">
                <h5 data-topic="usage">Use Cases & Adoption ‚ñæ</h5>
                <div class="dd-body" id="usage">Bitcoin is used as a store of value, medium of exchange in some regions, and a settlement asset. Institutions, EM remittances, and on-chain apps contribute to adoption. Research Lightning Network for faster payments.</div>
              </div>

              <div class="dd-item">
                <h5 data-topic="faq">FAQ ‚ñæ</h5>
                <div class="dd-body" id="faq">Q: Is Bitcoin anonymous? A: No, transactions are pseudonymous. Q: Can I lose my Bitcoin? A: Yes, if you lose private keys. Q: Is it legal? A: Depends on jurisdiction.</div>
              </div>
            </div>

            <div style="margin-top:12px" class="small muted">Tip: Add images, links, or PDFs for each topic for a richer history page.</div>
          </div>

          <!-- News page -->
          <div id="news-page" class="card" style="margin-top:18px;display:none">
            <h3>News (Demo)</h3>
            <div class="muted">This demo shows static headlines, replace with live RSS or API calls for real news.</div>
            <div style="margin-top:10px">
              <div class="event"><strong>Regulation updates</strong>  News about global regulatory changes and how they affect crypto.</div>
              <div class="event"><strong>Market movers</strong> Major trades and institutional buys/sells.</div>
              <div class="event"><strong>Tech updates</strong> Scaling proposals and network upgrades.</div>
            </div>
          </div>

          <!-- Tools page -->
          <div id="tools-page" class="card" style="margin-top:18px;display:none">
            <h3>Tools</h3>
            <div class="muted">Handy demo tools for analysis</div>
            <div style="margin-top:12px" class="grid-2">
              <div class="card">
                <h4>Calculator</h4>
                <div class="small muted">Convert BTC ‚Üî USD (demo)</div>
                <div style="margin-top:8px"><input id="calc-btc" placeholder="BTC" /></div>
                <div style="margin-top:8px">‚âà $<span id="calc-usd">0</span></div>
              </div>
              <div class="card">
                <h4>CSV Export</h4>
                <div class="small muted">Download demo price history as CSV</div>
                <div style="margin-top:8px"><button id="download-csv" class="btn">Download CSV</button></div>
              </div>
            </div>
          </div>

          <!-- Chat page -->
          <div id="chat-page" class="card" style="margin-top:18px;display:none">
            <h3>Chat Assistant</h3>
            <div class="chat-box">
              <div id="messages" class="messages"></div>
              <div class="quick-list" id="quick-list"></div>
            </div>
          </div>

          <footer><b>Demo site not for real investment decisions. Made by Aparna Singh</b></footer>
        </main>
      </div>
    </section>

    <!-- Sliding account panel -->
    <aside id="account-panel" class="slide-account">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div>
          <div style="font-weight:800;font-size:18px">Aparna</div>
          <div class="small muted">Demo VIP</div>
        </div>
        <button id="close-account" class="close-btn">Close</button>
      </div>

      <div style="margin-top:18px">
        <div class="small muted">Profile</div>
        <div style="margin-top:10px">
          <div class="card">
            <div style="font-weight:700">Aparna</div>
            <div class="muted">aparna@demo.local</div>
            <div style="margin-top:10px" class="small muted">Bio</div>
            <div>Crypto collector ‚Ä¢ Demo investor ‚Ä¢ Loves charts</div>
          </div>

          <div style="margin-top:12px" class="card">
            <div class="small muted">Account Details</div>
            <div style="margin-top:8px">Tier: VIP</div>
            <div>Member since: 2022</div>
            <div style="margin-top:8px">KYC: <strong>Verified</strong></div>
            <div style="margin-top:8px">Referral code: <code>APARNA-2025</code></div>
          </div>

          <div style="margin-top:12px" class="card">
            <div class="small muted">Security</div>
            <div style="margin-top:8px">2FA: Enabled</div>
            <div>Backup phrase: ‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</div>
          </div>

          <div style="margin-top:12px" class="card">
            <div class="small muted">Badges</div>
            <div style="margin-top:8px">üèÖ Early adopter ‚Ä¢ üìà Power trader ‚Ä¢ üîí Secure</div>
          </div>
        </div>
      </div>
    </aside>

  </div>

  <div id="toast" class="toast">Demo notification</div>

  <!-- Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // ===== DEMO CREDENTIALS (predefined) =====
    const DEMO_USER = 'Aparna';
    const DEMO_PASS = 'App270';

    // DOM refs
    const loginScreen = document.getElementById('login-screen');
    const app = document.getElementById('app');
    const loginBtn = document.getElementById('login-btn');
    const userInput = document.getElementById('username');
    const passInput = document.getElementById('password');
    const acctName = document.getElementById('acct-name');
    const btcBalanceEl = document.getElementById('btc-balance');
    const usdBalanceEl = document.getElementById('usd-balance');

    const navDashboard = document.getElementById('nav-dashboard');
    const navPortfolio = document.getElementById('nav-portfolio');
    const navHistory = document.getElementById('nav-history');
    const navNews = document.getElementById('nav-news');
    const navTools = document.getElementById('nav-tools');
    const navChat = document.getElementById('nav-chat');
    const dashboardPage = document.getElementById('dashboard-page');
    const portfolioPage = document.getElementById('portfolio-page');
    const historyPage = document.getElementById('history-page');
    const newsPage = document.getElementById('news-page');
    const toolsPage = document.getElementById('tools-page');
    const chatPage = document.getElementById('chat-page');
    const lastUpdated = document.getElementById('last-updated');

    const themeBtn = document.getElementById('theme-btn');
    const openAccountBtn = document.getElementById('open-account');
    const accountPanel = document.getElementById('account-panel');
    const closeAccountBtn = document.getElementById('close-account');

    // Quick navigation
    document.getElementById('to-dashboard').addEventListener('click', ()=> showSection('dashboard'));
    document.getElementById('to-portfolio').addEventListener('click', ()=> showSection('portfolio'));
    document.getElementById('to-history').addEventListener('click', ()=> showSection('history'));
    document.getElementById('to-news').addEventListener('click', ()=> showSection('news'));
    document.getElementById('to-chat').addEventListener('click', ()=> showSection('chat'));

    openAccountBtn.addEventListener('click', ()=> accountPanel.classList.add('open'));
    closeAccountBtn.addEventListener('click', ()=> accountPanel.classList.remove('open'));

    navDashboard.addEventListener('click', ()=> showSection('dashboard'));
    navPortfolio.addEventListener('click', ()=> showSection('portfolio'));
    navHistory.addEventListener('click', ()=> showSection('history'));
    navNews.addEventListener('click', ()=> showSection('news'));
    navTools.addEventListener('click', ()=> showSection('tools'));
    navChat.addEventListener('click', ()=> showSection('chat'));

    function showSection(name){
      // reset active
      [navDashboard, navPortfolio, navHistory, navNews, navTools, navChat].forEach(n=> n.classList && n.classList.remove('active'));
      // hide all pages
      [dashboardPage, portfolioPage, historyPage, newsPage, toolsPage, chatPage].forEach(p=> p && (p.style.display='none'));
      if(name==='dashboard'){ navDashboard.classList.add('active'); dashboardPage.style.display='block' }
      if(name==='portfolio'){ navPortfolio.classList.add('active'); portfolioPage.style.display='block' }
      if(name==='history'){ navHistory.classList.add('active'); historyPage.style.display='block' }
      if(name==='news'){ navNews.classList.add('active'); newsPage.style.display='block' }
      if(name==='tools'){ navTools.classList.add('active'); toolsPage.style.display='block' }
      if(name==='chat'){ navChat.classList.add('active'); chatPage.style.display='block' }
    }

    // Login flow (client-side demo only)
    loginBtn.addEventListener('click', ()=> tryLogin());
    passInput.addEventListener('keydown', (e)=>{ if(e.key==='Enter') tryLogin(); });

    function tryLogin(){
      const u = String(userInput.value || '').trim();
      const p = String(passInput.value || '').trim();
      if(u===DEMO_USER && p===DEMO_PASS){
        // success animation: slide out login and show app
        loginScreen.style.transition = 'opacity .45s ease';
        loginScreen.style.opacity = 0;
        setTimeout(()=>{ loginScreen.style.display='none'; app.style.display='block'; app.style.opacity=0; setTimeout(()=> app.style.opacity=1,10) },450);
        // fill account details
        acctName.textContent = DEMO_USER;
        // fake rich balance
        const fakeBtc = (Math.random()*80 + 5).toFixed(3); // 5 - 85 BTC
        const usd = Math.round(fakeBtc * (Math.random()*15000 + 20000));
        btcBalanceEl.textContent = fakeBtc + ' BTC';
        usdBalanceEl.textContent = '~$' + usd.toLocaleString();
        document.getElementById('total-value').textContent = '~$' + (usd + 150000).toLocaleString();
        document.getElementById('holding-btc').textContent = (fakeBtc * ((Math.random()*0.8)+0.5)).toFixed(3);
        document.getElementById('watch-btc').textContent = dataSampleLast();
        document.title = `${DEMO_USER} ‚Äî BitVista`;
        // init dashboard chart and chat
        initChart();
        initPie();
        initChat();
        showToast('Welcome back, Aparna ‚Äî demo funds credited');
      } else {
        alert('Invalid demo credentials. Hint: username "Aparna" and password "App270"');
      }
    }

    // ===== Chart demo (Chart.js) =====
    let btcChart;
    let latestData = [];
    function dataSampleLast(){
      if(!latestData || latestData.length===0) return '‚Äî';
      return latestData[latestData.length-1].toLocaleString();
    }

    function initChart(){
      const ctx = document.getElementById('btcChart').getContext('2d');
      // fake data: a rising and falling pattern
      const now = new Date();
      const labels = [];
      const data = [];
      for (let i = 30; i >= 0; i--) {
        const d = new Date(now.getTime() - i * 24 * 60 * 60 * 1000);
        labels.push(d.toISOString().slice(0, 10));
        const base = 45000 + Math.sin(i / 3) * 5000 + (30 - i) * 120;
        data.push(Math.round(base + (Math.random() - 0.5) * 3000));
      }
      latestData = data.slice();

      if (btcChart) btcChart.destroy();

      btcChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels,
          datasets: [
            {
              label: 'BTC (USD)',
              data,
              tension: 0.35,
              pointRadius: 3,
              fill: true,
              backgroundColor: 'rgba(247,147,26,0.08)',
              borderColor: '#f7931a',
            },
          ],
        },
        options: {
          responsive: true,
          plugins: { legend: { display: false } },
          scales: {
            x: { grid: { display: false }, ticks: { maxRotation: 0 } },
            y: { grid: { color: 'rgba(255,255,255,0.03)' } },
          },
        },
      });

      document.getElementById('cur-price').textContent = '$' + data[data.length-1].toLocaleString();
      lastUpdated.textContent = new Date().toLocaleString();
      // animate small 24h change
      const change = (Math.random()*6-3).toFixed(2);
      document.getElementById('change-24').textContent = (change>0?'+':'') + change + '%';

      // populate watch price
      document.getElementById('watch-btc').textContent = data[data.length-1].toLocaleString();
    }

    // pie chart
let pieChart;
function initPie() {
  const ctx = document.getElementById('pieChart').getContext('2d');
  const data = [70, 20, 10];
  if (pieChart) pieChart.destroy();

  pieChart = new Chart(ctx, {
    type: 'doughnut',
    data: {
      labels: ['BTC', 'ETH', 'Other'],
      datasets: [
        {
          data,
          backgroundColor: ['#f7931a', '#3c82f6', '#94a3b8'],
          borderWidth: 1,
        },
      ],
    },
    options: {
      plugins: {
        legend: {
          position: 'bottom',
          labels: {
            color: '#e6eef8', // optional: matches your dark theme
          },
        },
      },
      cutout: '70%', // optional: gives a modern ring look
    },
  });
}

    // live update simulation: push a new point every 5s (demo)
    function startLiveSimulation(){
      setInterval(()=>{
        if(!btcChart) return;
        const last = btcChart.data.datasets[0].data[btcChart.data.datasets[0].data.length -1];
        const next = Math.round(last + (Math.random()-0.5)*2000);
        const nextLabel = new Date(Date.now()).toISOString().slice(0,10) + ' ' + new Date().toLocaleTimeString();
        btcChart.data.labels.push(nextLabel);
        btcChart.data.datasets[0].data.push(next);
        if(btcChart.data.labels.length>60){ btcChart.data.labels.shift(); btcChart.data.datasets[0].data.shift(); }
        btcChart.update();
        document.getElementById('cur-price').textContent = '$' + next.toLocaleString();
        lastUpdated.textContent = new Date().toLocaleString();
      },5000);
    }

    // ===== Chat demo =====
    const canned = [
      {q:'What is Bitcoin?', a:'Bitcoin is a decentralized digital currency invented in 2008. This is demo text.'},
      {q:'How do I buy BTC?', a:'You can use an exchange or peer-to-peer platform. For real guidance, consult a financial advisor.'},
      {q:'Is Bitcoin safe?', a:'Bitcoin has risks like price volatility. Keep security best practices and use cold storage for large holdings.'},
      {q:'Show me the last price', a:()=> document.getElementById('cur-price').textContent},
      {q:'Help me understand the chart', a:'This chart shows a simulated price history over the past 30 days. Replace data with real API responses.'}
    ];

    function initChat(){
      const messages = document.getElementById('messages');
      const quickList = document.getElementById('quick-list');
      messages.innerHTML = '';
      quickList.innerHTML = '';
      // seed bot message
      addBot('Hi! I am BitVista assistant. Click a quick reply to see canned answers.');
      // add quick replies
      canned.forEach((c,idx)=>{
        const btn = document.createElement('button'); btn.textContent = c.q; btn.addEventListener('click', ()=> handleQuick(idx)); quickList.appendChild(btn);
      });

      function handleQuick(i){
        const entry = canned[i];
        addUser(entry.q);
        setTimeout(()=>{
          const ans = (typeof entry.a === 'function')? entry.a() : entry.a;
          addBot(ans);
        },450);
      }

      function addBot(text){
        const d = document.createElement('div'); d.className='msg bot'; d.textContent = text; messages.appendChild(d); messages.scrollTop = messages.scrollHeight;
      }
      function addUser(text){
        const d = document.createElement('div'); d.className='msg user'; d.textContent = text; messages.appendChild(d); messages.scrollTop = messages.scrollHeight;
      }
    }

    // Dropdown toggles on history
    document.addEventListener('click', (e)=>{
      const h = e.target.closest('[data-topic]');
      if(h){
        const body = h.parentElement.querySelector('.dd-body');
        if(!body) return;
        body.style.display = (body.style.display==='block')? 'none' : 'block';
      }
    });

    // Tools: calculator and CSV export
    document.getElementById('calc-btc')?.addEventListener('input', (e)=>{
      const v = parseFloat(e.target.value) || 0;
      const price = latestData && latestData.length? latestData[latestData.length-1]: 50000;
      document.getElementById('calc-usd').textContent = (v * price).toLocaleString();
    });

    document.getElementById('download-csv')?.addEventListener('click', ()=>{
      if(!btcChart) return alert('Chart not initialized');
      const labels = btcChart.data.labels;
      const data = btcChart.data.datasets[0].data;
      let csv = 'date,price\n';
      for(let i=0;i<labels.length;i++) csv += `${labels[i]},${data[i]}\n`;
      const blob = new Blob([csv], {type:'text/csv'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href=url; a.download='btc-demo-history.csv'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    });

    // Theme toggle
    themeBtn.addEventListener('click', ()=>{
      document.body.classList.toggle('light');
      showToast('Theme toggled');
    });

    // simple toast
    function showToast(text){
      const t = document.getElementById('toast'); t.textContent = text; t.classList.add('show'); setTimeout(()=> t.classList.remove('show'),3500);
    }

    // initialize defaults
    showSection('dashboard');

    // small UX: allow pressing Enter in username to focus password
    userInput.addEventListener('keydown', (e)=>{ if(e.key==='Enter') passInput.focus() });

    // start live sim when page active
    setTimeout(()=> startLiveSimulation(), 2000);
  </script>
</body>
</html>